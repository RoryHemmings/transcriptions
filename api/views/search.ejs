<head>
  <%- include('./partials/head'); %>
</head>

<body class="d-flex flex-column min-vh-100">
  <%- include('./partials/navbar') %>
  <main class="container">
    <h1 class="text-center">
      Search
    </h1>

    <!-- Search through url so people can copy it -->
    <form action="/search/" class="col-md-4 col-centered">
      <div class="form-group">
        <input id="searchbar" name="term" type="text" placeholder="Search" class="form-control" />
      </div>

      <div class="form-group">
        <button type="submit" class="btn btn-primary">Search</button>
      </div>
    </form>

    <div id="serachResults" class="container">
      <% if (results.length < 1) { %>
      <h3 class="info">No Results</h3>
      <% } else { %>
      <% results.forEach(transcription => { %>
      <div class="transcription flex-item flex-container" onclick="reroute('/transcription/<%=transcription.id%>')">
        <div class="flex-item" id="transcription-info">
          <h5 id="title"><%=transcription.title%></h5>
          <p id="author" class="text-muted" onclick="reroute('/user/')"><%=transcription.cbUsername%></p>
          <p id="dateCreated" class="text-muted"><%=new Date(transcription.dateCreated).toLocaleDateString()%></p>
          <p id="numLikes" class="text-muted">👍 <%=JSON.parse(transcription.likes).length%> | 👎
            <%=JSON.parse(transcription.dislikes).length%></p>
        </div>
        <div class="flex-item" id="transcription-preview">
          <% if (transcription.mimetype == 'application/pdf') { %>
          <img src="/static/res/pdf.png" class="pdf-thumbnail" pdf-path="/uploads/<%=transcription.filename%>"
            width="200" height="258" />
          <% } else { %>
          <img src="/uploads/<%=transcription.filename%>" alt="preview" width="200" height="258" class="img-cover" />
          <% } %>
        </div>
      </div>
      <% }) %>
      <% } %>
    </div>
  </main>

  <footer class="mt-auto">
    <%- include('./partials/footer'); %>
  </footer>

</body>